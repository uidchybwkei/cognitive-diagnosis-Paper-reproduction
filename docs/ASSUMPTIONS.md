# **假设说明（ASSUMPTIONS）**

本项目旨在复现 **MD/paper.md** 中的论文结果。论文中省略了一些实现细节，同时所提供的数据集也存在不一致之处。以下条目用于说明本代码在这些空缺和歧义处所采用的具体处理方式。

---

## **数据归一化**

* 提供的 CSV 文件中的成绩取值范围为 **[0,10]**（其中 **-1** 表示缺失值）。论文中说明成绩范围为 **[0,1]**。
  本实现对所有非缺失成绩按 **score\_scale = 10.0** 进行归一化处理。

---

## **缺失值处理**

* 提供的 **R.csv** 中包含 **-1** 值。
  本实现将 **-1** 视为缺失 / 未观测值，并在数据划分、目标函数计算以及评估指标计算中排除这些条目。

---

## **Q 矩阵归一化**

* 论文在公式 (Eq.3.1-1) 中对每一道题目的 Q 行按所需技能数量进行归一化。
  本实现对 **行和大于 0 的 Q 行** 执行按行归一化。

---

## **Q 矩阵的方向约定**

* 论文符号中在不同位置同时使用了 **$q_{ik}$** 和 **$q_{ki}$** 两种记法。
* 提供的数据集中 **q.csv** 文件被解释为形状 **(N, K)**，其中：
  * 行表示 **题目**
  * 列表示 **技能**
* 本实现中的预测计算方式为：
  * $\eta = \alpha Q^T$
  * $\eta' = (c \odot \alpha) Q'^T$

---

## **NetworkSecurity 数据集的技能数量不一致问题**

* 论文表 1 中指出 "Network Security" 数据集的技能数 **$K=7$**，但提供的 **dataset/networkSecurity/q.csv** 仅包含 6 列技能。
* 本实现对该数据集使用 **expected\_k=7**，并额外添加一列技能（称为“未知技能”），以匹配论文中报告的技能数量。

---

## **NetworkSecurity 中 Q 矩阵的全零行问题**

* 提供的 **dataset/networkSecurity/q.csv** 中存在 4 行全为 0 的题目（题目索引为：2、7、14、17），论文中未对该情况进行说明。
* 本实现将这些题目分配到新增的“未知技能”列中，从而保证 Q 行和非零，使公式 (Eq.3.1-1) 可正常应用。

---

## **训练 / 测试划分协议**

* 论文构建的训练集包含 10% 到 80% 的成绩数据，其余数据用于测试。
* 本实现将“成绩数据”解释为 **已观测的成绩条目**（即非缺失项），并在这些条目上进行随机划分；随机数种子可配置。

---

## **验证集设置**

* 论文仅描述了训练集 / 测试集，并未显式引入验证集。
* 本实现默认设置 **val\_ratio = 0.0**（不使用验证集），但可通过配置文件启用验证集。

---

## **参数 c 与 α 的取值范围**

* 论文指出诊断目标 **$c_j$** 和 **$\alpha_{jk}$** 位于 **$[0,1]$** 区间内，但模型采用高斯似然与高斯先验，且未说明在优化过程中是否进行投影或裁剪操作。
* 本实现默认对 **$c$** 和 **$\alpha$****不施加取值约束**（不进行裁剪）。
* 同时提供了一个可配置选项，可在训练过程中将 **$c$** 和 **$\alpha$** 裁剪至 **$[0,1]$**，默认关闭，用于稳定性实验。

---

## **缺失的优化超参数**

* 论文未给出以下超参数的具体数值：
  * **步长 **$r_1$**, **$r_2$
  * 迭代次数 / 收敛判据
  * 先验均值 **$\mu_c$**, **$\mu_\alpha$** 及先验精度 **$\sigma_*$***
* 本实现为上述参数在 **configs/default.yaml** 中提供了可配置的默认值。

---

## **α 更新步骤（Eq.3.3-8）的歧义处理**

* **论文写为 **$\alpha^{new} = \alpha^{old} - r_2 \times (\partial/\partial\alpha) g(\alpha)$**，并定义 **$g(\alpha) = \partial F/\partial \alpha$**。**
* 本实现将 Step-2 解释为对目标函数 **$F$** 进行标准的梯度下降：
  * $\alpha^{new} = \alpha^{old} - r_2 \times g(\alpha)$**，其中 **$g(\alpha) = \partial F/\partial \alpha$**。**

---

## **评价指标公式**

* 论文中使用了 MAE 和 RMSE，但未给出明确的计算公式。
* 本实现采用标准定义，并仅在已观测（非缺失）的测试条目上计算：
  * $\text{MAE} = \text{mean}(|y - \hat{y}|)$
  * $\text{RMSE} = \sqrt{\text{mean}((y - \hat{y})^2)}$
